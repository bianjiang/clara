<?xml version="1.0" encoding="UTF-8"?>
<fields>
	<field identifier="protocolid" display-name="IRB Protocol Number" xtype="numberfield" allowed-operators="EQUALS" type="ELEMENT_NODE" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="id = {value}" report-xpath="CAST(id AS varchar(100))" />
	<field identifier="protocalTitle" display-name="Study Title" xtype="textfield" type="ELEMENT_NODE" allowed-operators="CONTAINS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/title/text()[fn:contains(fn:upper-case(.),{value})]')=1" report-xpath="meta_data_xml.value('(/protocol/title/text())[1]','varchar(100)')" />
	<field identifier="piname" display-name="PI Name" xtype="clarafield.combo.user" type="ATTRIBUTE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/staffs/staff/user[roles/role=&quot;Principal Investigator&quot; and @id = {value}]')=1" report-xpath="meta_data_xml.value('(/protocol/staffs/staff/user[roles/role[fn:contains(fn:upper-case(.),&quot;PRINCIPAL INVESTIGATOR&quot;)]]/lastname/text())[1]','varchar(50)')+ ',' +meta_data_xml.value('(/protocol/staffs/staff/user[roles/role[fn:contains(fn:upper-case(.),&quot;PRINCIPAL INVESTIGATOR&quot;)]]/firstname/text())[1]','varchar(50)')" />
	<field identifier="studycoordinatorname" display-name="Study Coordinator Name" xtype="clarafield.combo.user" type="ATTRIBUTE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/staffs/staff/user[roles/role=&quot;Study Coordinator&quot; and @id = {value}]')=1" report-xpath="meta_data_xml.value('(/protocol/staffs/staff/user[roles/role[fn:contains(fn:upper-case(.),&quot;STUDY COORDINATOR&quot;)]]/lastname/text())[1]','varchar(50)')+ ',' +meta_data_xml.value('(/protocol/staffs/staff/user[roles/role[fn:contains(fn:upper-case(.),&quot;STUDY COORDINATOR&quot;)]]/firstname/text())[1]','varchar(50)')" />
	<field identifier="studycoordinatorphone" display-name="Study Coordinator Phone" data-source="edu.uams.clara.webapp.protocol.domain.Protocol"  report-xpath="meta_data_xml.value('(/protocol/staffs/staff/user[roles/role[fn:contains(fn:upper-case(.),&quot;STUDY COORDINATOR&quot;)]]/@phone)[1]','varchar(50)')" />
	<field identifier="staffname" display-name="Staff name" xtype="clarafield.combo.user" type="ATTRIBUTE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/staffs/staff/user[@id = {value}]')=1" />
	<field identifier="nextcr" display-name="Next CR Date" xtype="date" type="ELEMENT_NODE" allowed-operators="BEFORE|AFTER|BETWEEN" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="Datediff(day, {value},meta_data_xml.value('(/protocol/most-recent-study/approval-end-date/text())[1]','Date')){operator}0" report-xpath="meta_data_xml.value('(/protocol/most-recent-study/approval-end-date/text())[1]','varchar(100)')" />
	<field identifier="protocolstatus" display-name="Protocol Status" xtype="clarafield.combo.protocol.studystatus" allowed-operators="EQUALS" type="ELEMENT_NODE" data-source="edu.uams.clara.webapp.protocol.domain.businesslogicobject.ProtocolStatus" search-xpath="protocol_status = {value}" report-xpath="meta_data_xml.value('(/protocol/status/text())[1]','varchar(50)')" />
	<field identifier="reviewtype" display-name="IRB Review Type" xtype="clarafield.combo.protocol.reviewtype" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/most-recent-study/approval-status/text()[fn:contains(fn:upper-case(.),{value})]')=1" report-xpath="meta_data_xml.value('(/protocol/most-recent-study/approval-status/text())[1]','varchar(50)')" />
	<field identifier="originalapprovaldate" display-name="IRB Initial Approval Date" xtype="clarafield.date" type="ELEMENT_NODE" allowed-operators="BEFORE|AFTER|BETWEEN" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="Datediff(day, {value},meta_data_xml.value('(/protocol/original-study/approval-date/text())[1]','Date')){operator}0" report-xpath="meta_data_xml.value('(/protocol/original-study/approval-date/text())[1]','varchar(100)')" />
	<field identifier="recentapprovaldate" display-name="Continuing Review Approval Date" xtype="clarafield.date" type="ELEMENT_NODE" allowed-operators="BEFORE|AFTER|BETWEEN" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="Datediff(day, {value},meta_data_xml.value('(/protocol/most-recent-study/approval-date/text())[1]','Date')){operator}0" report-xpath="meta_data_xml.value('(/protocol/most-recent-study/approval-date/text())[1]','varchar(100)')" />
	<field identifier="creationtimespan" display-name="Creation Time Range" xtype="clarafield.date" type="ELEMENT_NODE" allowed-operators="BEFORE|AFTER|BETWEEN" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="Datediff(day, {value},created){operator}0" report-xpath="created" />
	<field identifier="submissiontimespan" display-name="Submission Time Range" xtype="clarafield.date" type="ELEMENT_NODE" allowed-operators="BEFORE|AFTER|BETWEEN" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="id in (select distinct pf.protocol_id from protocol_form_status ps, protocol_form pf  where Datediff(day,{value},ps.modified){operator}0 and ps.id in (select min(id) from protocol_form_status ps1 where retired =0 and ps1.protocol_form_id in(select min(id) from protocol_form where retired =0 and protocol_form_type = 'NEW_SUBMISSION' and parent_id = id group by protocol_id) and ps1.protocol_form_status not in ('CANCELLED','DRAFT','PENDING_PL_ENDORSEMENT','PENDING_PI_ENDORSEMENT','PENDING_TP_ENDORSEMENT') group by protocol_form_id) and pf.id= ps.protocol_form_id)"/>
	<field identifier="completetimespan" display-name="Completion Time Range" xtype="clarafield.date" type="ELEMENT_NODE" allowed-operators="BEFORE|AFTER|BETWEEN" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="id in (select distinct protocol_id from protocol_form where id in (select protocol_form_id from protocol_form_status where Datediff(day,{value},modified){operator}0 and id in(select max(ps.id) from protocol_form_status ps, protocol_form pf where ps.protocol_form_id =pf.id and ps.retired =0 and pf.retired =0 and pf.protocol_form_type ='NEW_SUBMISSION' group by protocol_form_id) and protocol_form_status in ('DETERMINED_NOT_REPORTABLE_NEW_INFORMATION','DETERMINED_NOT_HUMAN_SUBJECT_RESEARCH','DETERMINED_HUMAN_SUBJECT_RESEARCH','COMPLETED','EXPEDITED_APPROVED','ACKNOWLEDGED','APPROVED','EXEMPT_APPROVED','IRB_APPROVED','IRB_ACKNOWLEDGED','IRB_DECLINED')))"/>
	<field identifier="drug" display-name="Drug Name" xtype="textfield" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/drugs/drug[@name = {value}]')=1" />
	<field identifier="primaryresponsible" display-name="Primary Responsible Institution" xtype="clarafield.combo.primaryresponsibleinstitution" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/site-responsible/text()[fn:contains(fn:upper-case(.),{value})]')=1" report-xpath="meta_data_xml.value('(/protocol/site-responsible/text())[1]','varchar(100)')" />
	<field identifier="sites" display-name="Sites" xtype="clarafield.combo.protocol.site" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/study-sites/site/site-name/text()[fn:contains(fn:upper-case(.),{value})]')=1" report-xpath="T1.Loc.value('(./site-name/text())[1]','varchar(100)')"  />
	<field identifier="stafflist" display-name="Staff List On Study" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" report-xpath="'Name: '+T3.Loc.value('(./lastname/text())[1]','varchar(50)')+','+T3.Loc.value('(./firstname/text())[1]','varchar(50)')+'; Role: '+T3.Loc.value('(./roles/role/text())[1]','varchar(50)')"  />
	<field identifier="funding" display-name="Funding" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" report-xpath="T2.Loc.value('./@amount','varchar(100)')+','+T2.Loc.value('./@type','varchar(100)')+','+T2.Loc.value('./@entityname','varchar(100)')"  />
	<field identifier="nct" display-name="NCT Number" xtype="clarafield.combo.protocol.nctNumber" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol"  search-xpath="meta_data_xml.exist('/protocol/summary/clinical-trials-determinations/nct-number[text()!=&quot;&quot;]')=1"  report-xpath="meta_data_xml.value('(/protocol/summary/clinical-trials-determinations/nct-number/text())[1]','varchar(100)')"  />
	<field identifier="iscancerstudy" display-name="Is Cancer Study?" xtype="clarafield.combo.protocol.cancerrelated" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol"  search-xpath="meta_data_xml.exist('/protocol/extra/prmc-related-or-not/text()[fn:contains(fn:upper-case(.),{value})]')=1"  report-xpath="meta_data_xml.value('(/protocol/extra/prmc-related-or-not/text())[1]','varchar(100)')"  />
	<field identifier="hascontinuingreview" display-name="Has Continuing Review" xtype="clarafield.combo.protocol.hascontinuingreview" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="id {value} (select distinct protocol_id from protocol_form where id in(SELECT distinct protocol_form_id FROM protocol_form_status where retired = 0 and protocol_form_id in (  select id from protocol_form where retired =0 and protocol_form_type  ='CONTINUING_REVIEW' ) and protocol_form_status in ('IRB_APPROVED','EXPEDITED_APPROVED','EXEMPT_APPROVED')))"/>
	<field identifier="enrollmentinformation" display-name="Enrollment Information"  data-source="edu.uams.clara.webapp.protocol.domain.Protocol" report-xpath="meta_data_xml.value('(/protocol/summary/irb-determination/subject-accrual/enrollment/local/since-approval/text())[1]','varchar(50)')"/>
	<field identifier="pushedtoepic" display-name="Pushed to Epic"  data-source="edu.uams.clara.webapp.protocol.domain.Protocol" report-xpath="meta_data_xml.value('(/protocol/pushed-to-epic/text())[1]','varchar(50)')"/>
	<field identifier="agendadate" display-name="Agenda Date" xtype="clarafield.date" type="ELEMENT_NODE" allowed-operators="BEFORE|AFTER|BETWEEN" data-source="edu.uams.clara.webapp.protocol.domain.irb.Agenda" search-xpath="Datediff(day, {value},date){operator}0"  />
	
	
	<!-- <field identifier="clinicaltrailgov" display-name="Registration With ClinicalTrials.gov" xtype="clarafield.combo.protocol.clicnicaltrail" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol"  search-xpath="meta_data_xml.exist('/protocol/summary/clinical-trials-determinations'){value}"/>
 -->
	<field identifier="laysummary" display-name="Lay Summary" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" report-xpath="meta_data_xml.value('(/protocol/lay-summary/text())[1]','varchar(max)')" />
 	<field identifier="sitelocation" display-name="Site Location" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" report-xpath="T1.Loc.value('(./address/text())[1]','varchar(100)')+','+T1.Loc.value('(./city/text())[1]','varchar(100)')+','+T1.Loc.value('(./state/text())[1]','varchar(100)')"  />
	<field identifier="queuecommittee" display-name="Current Queue" xtype="clarafield.combo.protocol.committee" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="id in (select distinct protocol_id from protocol_form where retired =0 and protocol_form_type ='NEW_SUBMISSION' and id in (select distinct protocol_form_id from protocol_form_committee_status where retired =0 and committee = {value} and protocol_form_committee_status in ('PENDING_EXPEDITED_IRB_REVIEW','PENDING_EXEMPT_IRB_REVIEW','IN_REVIEW','PENDING_IRB_REVIEW_ASSIGNMENT','PENDING_IRB_REVIEW_RE_ASSIGNMENT','IRB_AGENDA_ASSIGNED','PENDING_REVIEWER_ASSIGNMENT','IN_REVIEW_REQUESTED','IN_REVIEW_FOR_BUDGET') and id in (select max(id) from protocol_form_committee_status where retired =0 group by protocol_form_id)))" />
	<field identifier="studytype" display-name="Type of Study" xtype="clarafield.combo.protocol.studytype" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/study-type/text()[fn:contains(fn:upper-case(.),{value})]')=1" report-xpath="meta_data_xml.value('(/protocol/study-type/text())[1]','varchar(100)')" />
	<field identifier="substudytype" display-name="Type of Study" xtype="clarafield.combo.protocol.studytype" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/study-type/investigator-initiated/investigator-description/text()[fn:contains(fn:upper-case(.),{value})]')=1" report-xpath="meta_data_xml.value('(/protocol/study-type/investigator-initiated/investigator-description/text())[1]','varchar(100)')" />
	<field identifier="studynature" display-name="Study Nature" xtype="clarafield.combo.protocol.studynature" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/study-nature/text()[fn:contains(fn:upper-case(.),{value})]')=1" report-xpath="meta_data_xml.value('(/protocol/study-nature/text())[1]','varchar(100)')" />
	<field identifier="druganddevice" display-name="Including (Drug, Nutritional Products, Devices)" xtype="clarafield.combo.protocol.druganddevice" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/study-nature/biomedical-clinical/study-involves/involve/text()[fn:contains(fn:upper-case(.),{value})]')=1" report-xpath="meta_data_xml.value('(/protocol/study-nature/biomedical-clinical/study-involves/involve/text())[1]','varchar(100)')" />
	<field identifier="studysubmissionstatus" display-name="Study Submission Status" xtype="clarafield.combo.protocol.studysubmissionstatus" type="ELEMENT_NODE" allowed-operators="EQUALS"  data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="id in (select distinct protocol_id from protocol_form where id in (select protocol_form_id from protocol_form_status where id in(select max(ps.id) from protocol_form_status ps, protocol_form pf where ps.protocol_form_id =pf.id and ps.retired =0 and pf.retired =0 and pf.protocol_form_type ='NEW_SUBMISSION' group by protocol_form_id) and protocol_form_status {value}))" />
	<field identifier="reviewedcommittee" display-name="Reviewed Committee" xtype="clarafield.combo.protocol.committee" type="ELEMENT_NODE" allowed-operators="EQUALS"  data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="id in (select distinct pf.protocol_id from protocol_form_committee_status pcs, protocol_form pf where pcs.protocol_form_id =pf.id  and pf.id = pf.parent_id and pf.retired =0 and pcs.retired =0 and pf.protocol_form_type='NEW_SUBMISSION'and pcs.committee= {value})" />
	<field identifier="insuranceplancode" display-name="Insurance Plan Code"  type="ELEMENT_NODE" allowed-operators="EQUALS"  data-source="edu.uams.clara.webapp.protocol.domain.Protocol" report-xpath="meta_data_xml.value('(/protocol/summary/hospital-service-determinations/insurance-plan-code/text())[1]','varchar(100)')" />
	<field identifier="corporateguarantorcode" display-name="Corporate Guarantor Code" type="ELEMENT_NODE" allowed-operators="EQUALS"  data-source="edu.uams.clara.webapp.protocol.domain.Protocol" report-xpath="meta_data_xml.value('(/protocol/summary/hospital-service-determinations/corporate-gurantor-code/text())[1]','varchar(100)')" />
	<field identifier="college" display-name="College" xtype="clarafield.college" type="ATTRIBUTE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="meta_data_xml.exist('/protocol/responsible-department[@collegeid = {value}]')=1" report-xpath="meta_data_xml.value('(/protocol/responsible-department/@collegedesc)[1]','varchar(100)')" />
	<field identifier="approvalstatus" display-name="Approval Status" xtype="clarafield.combo.protocol.formstatus" type="ATTRIBUTE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" search-xpath="id in (select distinct protocol_id from protocol_form where retired =0 and protocol_form_type ='NEW_SUBMISSION' and id in (select distinct protocol_form_id from protocol_form_status where retired =0 and protocol_form_status = {value} and id in (select max(id) from protocol_form_status where retired =0 group by protocol_form_id)))" />
	<field identifier="legalreviewer" display-name="Legal Reviewer" xtype="clarafield.combo.user" type="ATTRIBUTE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.contract.domain.contractform.ContractForm" search-xpath="meta_data_xml.exist('/contract/committee-review/committee/assigned-reviewers/assigned-reviewer[@user-role = &quot;ROLE_CONTRACT_LEGAL_REVIEW&quot; and @user-id = {value}]')=1" report-xpath="meta_data_xml.value('(/contract/committee-review/committee/assigned-reviewers/assigned-reviewer[@user-role = &quot;ROLE_CONTRACT_LEGAL_REVIEW&quot;]/@user-fullname)[1]','varchar(100)')" />
	<field identifier="contractadminreviewer" display-name="Contract Administrator" xtype="clarafield.combo.user" type="ATTRIBUTE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.contract.domain.contractform.ContractForm" search-xpath="meta_data_xml.exist('/contract/committee-review/committee/assigned-reviewers/assigned-reviewer[@user-role = &quot;ROLE_CONTRACT_ADMIN&quot; and @user-id = {value}]')=1" report-xpath="meta_data_xml.value('(/contract/committee-review/committee/assigned-reviewers/assigned-reviewer[@user-role = &quot;ROLE_CONTRACT_ADMIN&quot;]/@user-fullname)[1]','varchar(100)')" />
	<field identifier="contractid" display-name="Contract Number" xtype="numberfield" allowed-operators="EQUALS" type="ELEMENT_NODE" data-source="edu.uams.clara.webapp.contract.domain.Contract" search-xpath="id = {value}" report-xpath="identifier" />
	<field identifier="contractstatus" display-name="Contract Current Status" xtype="clarafield.combo.contract.status" allowed-operators="EQUALS" type="ELEMENT_NODE" data-source="edu.uams.clara.webapp.contract.domain.businesslogicobject.ContractStatus" search-xpath="contract_status = {value}" report-xpath="meta_data_xml.value('(/contract/status/text())[1]','varchar(50)')" />
	<field identifier="contractpiname" display-name="PI Name" xtype="clarafield.combo.user" type="ATTRIBUTE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.contract.domain.contractform.ContractForm" search-xpath="meta_data_xml.exist('/contract/staffs/staff/user[roles/role=&quot;Principal Investigator&quot; and @id = {value}]')=1" report-xpath="meta_data_xml.value('(/contract/staffs/staff/user[roles/role[fn:contains(fn:upper-case(.),&quot;PRINCIPAL INVESTIGATOR&quot;)]]/lastname/text())[1]','varchar(50)')+ ',' +meta_data_xml.value('(/contract/staffs/staff/user[roles/role[fn:contains(fn:upper-case(.),&quot;PRINCIPAL INVESTIGATOR&quot;)]]/firstname/text())[1]','varchar(50)')" />
	
	<!-- this part for summary -->
	<field identifier="timeinreviewsummary" display-name="Time in Review Summary" xtype="clarafield.combo.timeinreviewsummary" type="ELEMENT_NODE" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" />
	
	
	<!-- this part for HRR Report -->
	<field identifier="hsrreport" display-name="Report Type" xtype="clarafield.combo.protocol.hsrsub" type="ATTRIBUTE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol" />
	<field identifier="daterange" display-name="Date Range" xtype="clarafield.date" type="ELEMENT_NODE" allowed-operators="BEFORE|AFTER|BETWEEN" data-source="edu.uams.clara.webapp.protocol.domain.Protocol"/>
	<field identifier="approveddaterange" display-name="Approved Date Range" xtype="clarafield.date" type="ELEMENT_NODE" allowed-operators="BEFORE|AFTER|BETWEEN" data-source="edu.uams.clara.webapp.protocol.domain.Protocol"/>
	
	<!-- auto date update to today -->
	<field identifier="autodateupdate" display-name="Approved Date Range(Schedule Only! From a Date to Today)" xtype="clarafield.date" type="ELEMENT_NODE" allowed-operators="EQUALS" data-source="edu.uams.clara.webapp.protocol.domain.Protocol"/>
	
</fields>